# Configuration et Variables d'Environnement

Ce fichier documente toutes les variables d'environnement disponibles pour SADAKA.

## üìã Variables d'Environnement

### Mode D√©veloppement

Cr√©ez un fichier `.env.local` √† la racine du projet :

```env
# API Configuration
VITE_API_BASE_URL=http://localhost:8080/api
VITE_PROXY_TARGET=http://localhost:8080

# Mock Data Configuration
VITE_USE_MOCKS=1              # 1 = Activer mocks, 0 = Forcer backend r√©el

# Application
VITE_APP_NAME=SADAKA
VITE_APP_VERSION=0.1.0
VITE_APP_ENV=development      # development | staging | production
```

### Mode Production

```env
# API Configuration
VITE_API_BASE_URL=https://api.sadaka.ma/api
VITE_PROXY_TARGET=https://api.sadaka.ma

# Mock Data Configuration
VITE_USE_MOCKS=0              # D√©sactiver mocks en production

# Application
VITE_APP_NAME=SADAKA
VITE_APP_VERSION=1.0.0
VITE_APP_ENV=production
```

## üîß Description des Variables

### API Configuration

#### `VITE_API_BASE_URL`
- **Type** : String
- **D√©faut** : `/api`
- **Description** : URL de base pour les appels API
- **Exemple** : `http://localhost:8080/api`

#### `VITE_PROXY_TARGET`
- **Type** : String
- **D√©faut** : `http://localhost:8080`
- **Description** : Cible du proxy Vite dev server
- **Exemple** : `http://localhost:8080`

### Mock Data Configuration

#### `VITE_USE_MOCKS`
- **Type** : Number (0 ou 1)
- **D√©faut** : `1` (activ√©)
- **Description** : Active le syst√®me de mocks localStorage
- **Valeurs** :
  - `1` : Mocks activ√©s (fonctionne sans backend)
  - `0` : Mocks d√©sactiv√©s (force le backend r√©el)

### Application Configuration

#### `VITE_APP_NAME`
- **Type** : String
- **D√©faut** : `SADAKA`
- **Description** : Nom de l'application

#### `VITE_APP_VERSION`
- **Type** : String
- **D√©faut** : `0.1.0`
- **Description** : Version de l'application

#### `VITE_APP_ENV`
- **Type** : String
- **D√©faut** : `development`
- **Valeurs** : `development` | `staging` | `production`
- **Description** : Environnement d'ex√©cution

## üìÅ Structure du Fichier .env

```
frontend-web/
‚îú‚îÄ‚îÄ .env                 # Variables par d√©faut (optionnel)
‚îú‚îÄ‚îÄ .env.local          # Variables locales (gitignore)
‚îú‚îÄ‚îÄ .env.development    # Sp√©cifique au d√©veloppement
‚îú‚îÄ‚îÄ .env.staging        # Sp√©cifique au staging
‚îî‚îÄ‚îÄ .env.production     # Sp√©cifique √† la production
```

## üöÄ Build et D√©ploiement

### Build de D√©veloppement

```bash
npm run dev
# Utilise VITE_USE_MOCKS=1 par d√©faut
# Proxy vers http://localhost:8080
```

### Build Production

```bash
# Avec variables .env.production
npm run build

# Preview
npm run preview
```

## üîê Bonnes Pratiques

### ‚úÖ √Ä FAIRE

- ‚úÖ Utiliser `.env.local` pour configurations locales
- ‚úÖ Committer `.env.example` sans valeurs sensibles
- ‚úÖ Utiliser variables de secrets en prod (GitHub Secrets, etc.)
- ‚úÖ Documenter toutes les variables d'env n√©cessaires
- ‚úÖ Valider les variables au d√©marrage

### ‚ùå √Ä NE PAS FAIRE

- ‚ùå Committer `.env.local` dans git
- ‚ùå Ajouter mots de passe/tokens en plaintext
- ‚ùå Utiliser des valeurs hardcod√©es
- ‚ùå Oublier de mettre √† jour quand env change
- ‚ùå M√©langer dev/prod configs

## üìù Exemple Complet

### .env.local (d√©veloppement local)

```env
# API - Backend local
VITE_API_BASE_URL=http://localhost:8080/api
VITE_PROXY_TARGET=http://localhost:8080

# Mocks activ√©s (fonctionnement offline)
VITE_USE_MOCKS=1

# App info
VITE_APP_NAME=SADAKA
VITE_APP_VERSION=0.1.0
VITE_APP_ENV=development
```

### .env.production (d√©ploiement)

```env
# API - Backend production
VITE_API_BASE_URL=https://api.sadaka.ma/api
VITE_PROXY_TARGET=https://api.sadaka.ma

# Mocks d√©sactiv√©s en prod
VITE_USE_MOCKS=0

# App info
VITE_APP_NAME=SADAKA
VITE_APP_VERSION=1.0.0
VITE_APP_ENV=production
```

## üß™ Test des Variables

Pour v√©rifier les variables charg√©es :

```javascript
// Dans console du navigateur ou fichier
console.log('API Base:', import.meta.env.VITE_API_BASE_URL);
console.log('Use Mocks:', import.meta.env.VITE_USE_MOCKS);
console.log('App Version:', import.meta.env.VITE_APP_VERSION);
console.log('Environment:', import.meta.env.VITE_APP_ENV);
```

## üîÑ Ordre de Priorit√©

Vite charge les variables dans cet ordre (derni√®re = prioritaire) :

1. `.env` (default)
2. `.env.local` (local overrides)
3. `.env.[mode]` (mode-specific)
4. `.env.[mode].local` (mode-specific local)
5. Variables syst√®me d'exploitation
6. Ligne de commande (`--define`)

## üìö Ressources

- [Vite - Environment Variables](https://vitejs.dev/guide/env-and-modes.html)
- [Configuration Vite](../vite.config.ts)
- [Constantes d'Application](./src/utils/constants.ts)

## üÜò D√©pannage

### Issue : "API_BASE_URL non d√©fini"
```bash
# Solution : Cr√©er .env.local avec :
VITE_API_BASE_URL=http://localhost:8080/api
```

### Issue : "Les mocks ne fonctionnent pas"
```bash
# Solution : V√©rifier que VITE_USE_MOCKS=1
echo "VITE_USE_MOCKS=1" >> .env.local
```

### Issue : "Erreur CORS"
```bash
# Solution : V√©rifier VITE_PROXY_TARGET et vite.config.ts
VITE_PROXY_TARGET=http://backend-url:8080
```

---

**Derni√®re mise √† jour** : D√©cembre 2024  
**Version** : 1.0
